<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
        <link rel="stylesheet" href="style.css">
        <title></title>
    </head>

    <body style = "display: flex;">
        <div id="loading-overlay" style="display: none; position: fixed; top: 0vh; left: 0vw; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 9999;">
        <div class="spinner"></div>
        <button id="panicBtn" class="sidebarBtn" style="position: fixed; top: 60vh; left: 46vw;">Exit / Cancel</button>
        </div>

        <div id="sidebar">

            <div class="titlebar"></div>
            <div id="upperTitle" class="titleWrapper">
                <h1 class="titleText">THE DOOR STORE</h1><br>
            </div>
            <div id="lowerTitle" class="titleWrapper">
                <p class="titleText">Matrixify Parser</h1><br>
            </div>

                <h3 class="subtitle">Add Bulk Tags</h3>
                <div class = "sidebarBox">
                    <div id ="tagsWrapper" style="height: 50%; overflow:scroll;">
                        <p id="tagsInnerText"class="sidebarInnerText">Tags</p>
                    </div>
                    <input id="addTag" class="textInput" type="text" placeholder="Tag">
                    <button id="tagBtn" class="sidebarBtn">Add Bulk Tag</button>
                </div>

                <h3 class="subtitle">Add Item Overrides</h3>
                <div class = "sidebarBox">
                    <div id="overridesWrapper" style="flex-grow: 3; flex-direction: column; overflow-y: scroll;">
                        <p id="overrideInnerText" class="sidebarInnerText">Item Overrides</p>
                    </div>

                    <div>
                        <div style="display: flex;">
                        <input id="overrideCode" class="textInput" type="text" placeholder="SKU" style="width:50%">
                        <input id="overridePrice" class="textInput" type="text" placeholder="Price" style="width:50%">
                        </div>

                        <button id="overrideBtn" class="sidebarBtn" style="width:94%">Add Item Override</button>
                    </div>

                </div>
        </div>

        <div id="content">

            <div style="width: 100%;">
                <div style="display: flex; margin-bottom: 0%; padding-bottom: 0%; height: auto; justify-content: space-between;">
                    <h3 class="bodyText">Upload Files</h3>
                    <img id="refreshBtn" src="./images/refresh.png" style="width: 5vh; margin: auto; margin-right: 2vw; cursor: pointer;">
                </div>

                <label id="dropBox" class="custom-file-upload">
                
                    <div id="uploadDiv">
                        <div id="uploadTextWrapper">
                            <div style="display:flex;">
                                <img src="./images/Upload_Icon.png" style="margin: auto; height:8vh;">
                            </div>
                            <h3 id="uploadText">Drag and drop or CLICK HERE to upload</h3>
                        </div>
                    </div>

                    <input id="fileInput" type="file">
                </label>
            </div>

            <div>
                <div id ="uploadWrapper" style="margin-top: 2vh;">
                    <h3 class="bodyText" style="margin-left: 2vh; margin-bottom: 0px; margin-top: 1vh;">Your Files</h3>
                    
                    <div style="height:30px; display: flex; justify-content: space-between; border-bottom: 0.5px solid #ccc; text-align: flex-start; margin: 1vw; margin-top: 0px; margin-bottom: 3px;">
                        <p class="filesHeader">File Name</p>
                        <p class="filesHeader">File Type</p>
                        <p class="filesHeader">Actions</p>
                    </div>

                    <div id="filesWrapper" style="display: flex; flex-direction: column;">
                    <h3 id="filesEmptyText" class="filesHeader">Files you upload will appear here</h3>
                    </div>

                </div>
            </div>

            <div id="formatInfo">
                <h5 style="color: #ccc; line-height: 1vh; margin-top: 1vh; cursor: pointer;"><u>Format Info / Requirements</u></h5>
            </div>

            
        <div id="commandWrapper">
            <h4 class="bodyText">Command Mode</h4>
            <img id="infoBtn" src="./images/Question_Icon.png" style="width: 2vh; margin: auto; margin-left: 5px; cursor: pointer;">
        
            <select id="commandSelect">
                <option value="UPDATE">Update</option>
                <option value="NEW">New</option>
                <option value="MERGE">Merge</option>
                <option value="DELETE">Delete</option>
            </select>
        </div>

        <button id="createFile">Create Matrixify File</button>

        <!-- <p style="color: aliceblue;" id="consoleText">console empty</p> -->
        <p style="color: #424246; position: absolute; bottom: -10px;">Version: 1.2.3</p>
    </div>

    <div id="formatPopup">
        <div id="formatContainer">
            <h3>B&M</h3>
            <div style="display: flex">
            <p>SKU Column</p><input type="text" value="1" class="formatInput" id="BM_setSKU"> <p>Price Column</p><input type="text" value="6" class="formatInput" id="BM_setPrice">
            </div>

            <h3>Reggio</h3>
            <div style="display: flex">
            <p>SKU Column</p><input type="text" value="2" class="formatInput rgFormat" id="RG_setSKU"> <p>Price Column</p><input type="text" value="13" class="formatInput rgFormat" id="RG_setPrice"><p>Material Column</p><input type="text" value="6" class="formatInput rgFormat" id="RG_setMaterial">
            </div>

            
            <h3>Custom File Formats</h3>

            <!-- <p>Current Shopify Data</p>
            <div style="display: flex">
            <p>SKU Column</p><input type="text" value="32" class="formatInput" id="SD_setSKU"> <p>Price Column</p><input type="text" value="37" class="formatInput" id="SD_setPrice">
            </div> -->

        </div>
        <button id="addCustomFormat" class="sidebarBtn">Add Custom File Format</button>

        <button class="sidebarBtn" id="closeFormat">Save and Exit</button>

    </div>


    <div id="commandInfoPopup">

        <div style="display:flex; justify-content: space-between; height: 6vh;">
            <!-- <div><h5 id="infoTitle">Command Modes</h3></div> -->
            <!-- <div><h3 id="closeInfo">Exit</h3></div> -->
        <div>

        <div style="margin-top: 5vh; margin-right: 8vh;">
        <p><b>UPDATE (USE FOR MOST CASES):</b> The app will search for an existing Product and update it. If an item cannot be found then that item will be ignored</p>
        <p class="infoText"><b>NEW:</b> Will try to create a new Product with the provided details. If such Product will already exist, then the result will be Failed.</p>
        <p class="infoText" style="margin-bottom: 0px;"><b>MERGE:</b> Will try to find existing Product, and update it with data from the row. If such product will not be found, then it will create new.</p>
        <p class="warningText">WARNING: If you upload a full pricelist (including items that you do not sell or have on the site) this mode will create new items on the site</p>
        <p class="infoText"><b>DELETE:</b> The app will delete the existing Product. If the Product can not be found, then the result will be Failed.</p>
        </div>
        <button class="sidebarBtn" id="closeInfo" style="width: 50px; margin-bottom: 2vh;">Exit</button>

    </div>

    
        <script type = "module" src = "index.js"></script>
        <script type="module" src = "excelJS.js"></script>
        <script type="module" src="parser.js"></script>
        <script type="module" src ="uiDriver.js"></script>

        
       
        <!-- <script>console.log("hw")</script> -->
    </body>

</html>